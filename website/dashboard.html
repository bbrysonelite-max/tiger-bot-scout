<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command Center | Tiger Bot Scout</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        tiger: { 50: '#fff7ed', 100: '#ffedd5', 200: '#fed7aa', 300: '#fdba74', 400: '#fb923c', 500: '#f97316', 600: '#ea580c', 700: '#c2410c', 800: '#9a3412', 900: '#7c2d12' },
                        line: { 500: '#00B900', 600: '#00a000' },
                        telegram: { 500: '#0088cc', 600: '#0077b5' }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>
    <style>
        .gradient-text { background: linear-gradient(135deg, #f97316 0%, #ea580c 50%, #c2410c 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    </style>
</head>
<body class="bg-slate-950 text-white font-sans">
    <!-- Sidebar -->
    <aside class="fixed left-0 top-0 h-full w-64 bg-slate-900 border-r border-slate-800 p-6 flex flex-col z-40">
        <div class="flex items-center gap-3 mb-10">
            <div class="w-10 h-10 bg-gradient-to-br from-tiger-500 to-tiger-700 rounded-xl flex items-center justify-center text-xl font-bold">üêØ</div>
            <span class="text-lg font-bold">Tiger Bot <span class="text-tiger-500">Scout</span></span>
        </div>
        <nav class="space-y-2 flex-1">
            <a href="#dashboard" onclick="showSection('dashboard')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl bg-tiger-500/10 text-tiger-400 font-medium" data-section="dashboard">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg>
                Command Center
            </a>
            <a href="#prospects" onclick="showSection('prospects')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="prospects">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                Prospects
            </a>
            <a href="#scripts" onclick="showSection('scripts')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="scripts">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                Scripts
            </a>
            <a href="#comms" onclick="showSection('comms')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="comms">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>
                Communications
            </a>
            <a href="#customers" onclick="showSection('customers')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="customers">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                Customers
                <span class="ml-auto bg-tiger-500 text-white text-xs px-2 py-0.5 rounded-full">7</span>
            </a>
            <a href="#bots" onclick="showSection('bots')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="bots">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                Bot Fleet
            </a>
            <a href="#hive" onclick="showSection('hive')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="hive">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                Hive Learnings
            </a>
            <a href="#analytics" onclick="showSection('analytics')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="analytics">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                Analytics
            </a>
            <a href="#settings" onclick="showSection('settings')" class="nav-link flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 transition" data-section="settings">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                Settings
            </a>
        </nav>
        <div class="border-t border-slate-800 pt-4 space-y-2">
            <div class="text-xs text-slate-500 px-4 mb-2">QUICK CONNECT</div>
            <a href="https://t.me/TigerBotScout_bot" target="_blank" class="flex items-center gap-3 px-4 py-2 rounded-lg bg-telegram-500/10 text-telegram-500 hover:bg-telegram-500/20 transition text-sm">
                <span>üì±</span> Telegram Bot
            </a>
            <a href="#" class="flex items-center gap-3 px-4 py-2 rounded-lg bg-line-500/10 text-line-500 hover:bg-line-500/20 transition text-sm">
                <span>üíö</span> LINE Bot
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="ml-64 p-8">
        <!-- Header -->
        <header class="flex items-center justify-between mb-8">
            <div>
                <h1 class="text-3xl font-bold">Command Center</h1>
                <p class="text-slate-400">Tiger Bot Scout ‚Äî AI Recruiting System</p>
            </div>
            <div class="flex items-center gap-4">
                <button onclick="refreshData()" class="flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                    Refresh
                </button>
                <div class="w-10 h-10 bg-tiger-500 rounded-full flex items-center justify-center font-bold">B</div>
            </div>
        </header>

        <!-- ============ DASHBOARD SECTION ============ -->
        <section id="section-dashboard" class="section-content">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-slate-400">Total Prospects</span>
                        <span class="w-10 h-10 bg-tiger-500/10 rounded-xl flex items-center justify-center text-tiger-500">üë•</span>
                    </div>
                    <div class="text-3xl font-bold" id="stat-total">--</div>
                    <div class="text-sm text-green-400 mt-1" id="stat-week">+0 this week</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-slate-400">Qualified (70+)</span>
                        <span class="w-10 h-10 bg-green-500/10 rounded-xl flex items-center justify-center text-green-500">‚úÖ</span>
                    </div>
                    <div class="text-3xl font-bold" id="stat-qualified">--</div>
                    <div class="text-sm text-slate-400 mt-1">Ready to contact</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-slate-400">Customers</span>
                        <span class="w-10 h-10 bg-tiger-500/10 rounded-xl flex items-center justify-center text-tiger-500">üë•</span>
                    </div>
                    <div class="text-3xl font-bold" id="stat-customers">7</div>
                    <div class="text-sm text-yellow-400 mt-1">7 pending setup ‚Ä¢ $693/mo</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-slate-400">Script Success</span>
                        <span class="w-10 h-10 bg-purple-500/10 rounded-xl flex items-center justify-center text-purple-500">üìù</span>
                    </div>
                    <div class="text-3xl font-bold" id="stat-success-rate">--%</div>
                    <div class="text-sm text-slate-400 mt-1"><span id="stat-converted" class="text-green-400">0</span> converted / <span id="stat-scripts">0</span> scripts</div>
                </div>
            </div>

            <!-- Hive Pulse Card -->
            <div class="bg-gradient-to-br from-tiger-500/10 to-orange-600/10 rounded-2xl border border-tiger-500/20 p-6 mb-8">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 bg-tiger-500/20 rounded-xl flex items-center justify-center">
                            <span class="text-2xl animate-pulse">üêØ</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">Hive Pulse</h3>
                            <p class="text-sm text-slate-400">Learning from the collective</p>
                        </div>
                    </div>
                    <span class="text-xs text-tiger-400 bg-tiger-500/10 px-3 py-1 rounded-full"><span id="hive-count">0</span> learnings</span>
                </div>
                <div id="hive-top-script" class="bg-slate-900/50 rounded-xl p-4 mb-4">
                    <div class="text-xs text-slate-500 mb-2">TOP WINNING SCRIPT</div>
                    <p class="text-sm text-slate-300 italic" id="hive-script-preview">Loading...</p>
                    <div class="flex items-center gap-2 mt-2">
                        <span class="text-xs bg-green-500/10 text-green-400 px-2 py-0.5 rounded">üéØ <span id="hive-script-success">0</span> successes</span>
                    </div>
                </div>
                <a href="#" onclick="showSection('hive')" class="text-tiger-400 text-sm hover:underline">View all learnings ‚Üí</a>
            </div>

            <!-- Main Grid -->
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Bot Status Overview -->
                <div class="lg:col-span-2">
                    <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6 mb-8">
                        <h2 class="text-xl font-semibold mb-6">System Status</h2>
                        <div class="grid md:grid-cols-2 gap-4">
                            <!-- Agent Zero -->
                            <div class="bg-slate-800/50 rounded-xl p-4 border border-slate-700">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center">üîç</div>
                                        <div>
                                            <div class="font-medium">Agent Zero</div>
                                            <div class="text-xs text-slate-500">Prospect Discovery</div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1 text-green-400 text-sm">
                                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Running
                                    </span>
                                </div>
                                <div class="text-sm text-slate-400">Next scan: <span class="text-white">2 hours</span></div>
                                <div class="text-sm text-slate-400">Last found: <span class="text-white">3 prospects</span></div>
                            </div>
                            <!-- Tiger Bot Scout -->
                            <div class="bg-slate-800/50 rounded-xl p-4 border border-slate-700">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-tiger-500/20 rounded-lg flex items-center justify-center">üêØ</div>
                                        <div>
                                            <div class="font-medium">Tiger Bot Scout</div>
                                            <div class="text-xs text-slate-500">Telegram Reports</div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1 text-green-400 text-sm">
                                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Online
                                    </span>
                                </div>
                                <div class="text-sm text-slate-400">Platform: <span class="text-telegram-500">Telegram</span></div>
                                <div class="text-sm text-slate-400">Commands today: <span class="text-white">12</span></div>
                            </div>
                            <!-- Tiger Bot (OpenClaw) -->
                            <div class="bg-slate-800/50 rounded-xl p-4 border border-slate-700">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center">üî•</div>
                                        <div>
                                            <div class="font-medium">Tiger Bot</div>
                                            <div class="text-xs text-slate-500">Follow-up & Objections</div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1 text-yellow-400 text-sm">
                                        <span class="w-2 h-2 bg-yellow-400 rounded-full"></span> Standby
                                    </span>
                                </div>
                                <div class="text-sm text-slate-400">Platform: <span class="text-telegram-500">Telegram</span></div>
                                <div class="text-sm text-slate-400">Location: <span class="text-white">Mac Pro</span></div>
                            </div>
                            <!-- Birdie Bot -->
                            <div class="bg-slate-800/50 rounded-xl p-4 border border-slate-700">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center">üê¶</div>
                                        <div>
                                            <div class="font-medium">Birdie Bot</div>
                                            <div class="text-xs text-slate-500">Personal Assistant</div>
                                        </div>
                                    </div>
                                    <span class="flex items-center gap-1 text-green-400 text-sm">
                                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Online
                                    </span>
                                </div>
                                <div class="text-sm text-slate-400">Platform: <span class="text-telegram-500">Telegram</span></div>
                                <div class="text-sm text-slate-400">Location: <span class="text-white">Mac Pro</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Prospects -->
                    <div class="bg-slate-900 rounded-2xl border border-slate-800">
                        <div class="p-6 border-b border-slate-800 flex items-center justify-between">
                            <h2 class="text-xl font-semibold">Recent Prospects</h2>
                            <a href="#prospects" onclick="showSection('prospects')" class="text-tiger-500 text-sm hover:underline">View all ‚Üí</a>
                        </div>
                        <div class="divide-y divide-slate-800" id="prospects-list">
                            <div class="p-6 text-center text-slate-500">Loading...</div>
                        </div>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="space-y-8">
                    <!-- Communication Channels -->
                    <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                        <h2 class="text-xl font-semibold mb-4">Communication Channels</h2>
                        <div class="space-y-3">
                            <!-- Telegram -->
                            <div class="bg-telegram-500/10 rounded-xl p-4 border border-telegram-500/20">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <span class="text-2xl">üì±</span>
                                        <div>
                                            <div class="font-medium text-telegram-500">Telegram</div>
                                            <div class="text-xs text-slate-400">@TigerBotScout_bot</div>
                                        </div>
                                    </div>
                                    <span class="text-green-400 text-xs font-medium px-2 py-1 bg-green-400/10 rounded-full">Connected</span>
                                </div>
                                <div class="flex gap-2">
                                    <a href="https://t.me/TigerBotScout_bot" target="_blank" class="flex-1 text-center py-2 bg-telegram-500 hover:bg-telegram-600 rounded-lg text-sm font-medium transition">Open Chat</a>
                                    <button class="px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm transition">‚öôÔ∏è</button>
                                </div>
                            </div>
                            <!-- LINE -->
                            <div class="bg-line-500/10 rounded-xl p-4 border border-line-500/20">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex items-center gap-3">
                                        <span class="text-2xl">üíö</span>
                                        <div>
                                            <div class="font-medium text-line-500">LINE</div>
                                            <div class="text-xs text-slate-400">Thai Market Channel</div>
                                        </div>
                                    </div>
                                    <span class="text-yellow-400 text-xs font-medium px-2 py-1 bg-yellow-400/10 rounded-full">Setup Required</span>
                                </div>
                                <div class="flex gap-2">
                                    <button onclick="openLineSetup()" class="flex-1 text-center py-2 bg-line-500 hover:bg-line-600 rounded-lg text-sm font-medium transition">Connect LINE</button>
                                    <button class="px-3 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-sm transition">üìñ</button>
                                </div>
                            </div>
                            <!-- Facebook Messenger (Coming Soon) -->
                            <div class="bg-slate-800/50 rounded-xl p-4 border border-slate-700 opacity-60">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <span class="text-2xl">üí¨</span>
                                        <div>
                                            <div class="font-medium">Messenger</div>
                                            <div class="text-xs text-slate-500">Coming Soon</div>
                                        </div>
                                    </div>
                                    <span class="text-slate-500 text-xs">Q2 2026</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                        <h2 class="text-xl font-semibold mb-4">Quick Actions</h2>
                        <div class="space-y-3">
                            <button onclick="triggerDiscovery()" class="w-full flex items-center gap-3 p-4 bg-slate-800 hover:bg-slate-700 rounded-xl transition text-left">
                                <span class="text-2xl">üîç</span>
                                <div>
                                    <div class="font-medium">Run Discovery Now</div>
                                    <div class="text-sm text-slate-400">Trigger Agent Zero scan</div>
                                </div>
                            </button>
                            <button onclick="sendDailyReport()" class="w-full flex items-center gap-3 p-4 bg-slate-800 hover:bg-slate-700 rounded-xl transition text-left">
                                <span class="text-2xl">üìä</span>
                                <div>
                                    <div class="font-medium">Send Daily Report</div>
                                    <div class="text-sm text-slate-400">Push to Telegram now</div>
                                </div>
                            </button>
                            <button onclick="openBroadcast()" class="w-full flex items-center gap-3 p-4 bg-slate-800 hover:bg-slate-700 rounded-xl transition text-left">
                                <span class="text-2xl">üì¢</span>
                                <div>
                                    <div class="font-medium">Broadcast Message</div>
                                    <div class="text-sm text-slate-400">Send to all channels</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <!-- Pipeline -->
                    <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                        <h2 class="text-xl font-semibold mb-4">Pipeline</h2>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2"><span class="w-3 h-3 bg-blue-500 rounded-full"></span><span>New</span></div>
                                <span class="font-semibold" id="pipe-new">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2"><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span>Contacted</span></div>
                                <span class="font-semibold" id="pipe-contacted">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2"><span class="w-3 h-3 bg-green-500 rounded-full"></span><span>Qualified</span></div>
                                <span class="font-semibold" id="pipe-qualified">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-2"><span class="w-3 h-3 bg-tiger-500 rounded-full"></span><span>Converted</span></div>
                                <span class="font-semibold" id="pipe-converted">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============ PROSPECTS SECTION ============ -->
        <section id="section-prospects" class="section-content hidden">
            <div class="bg-slate-900 rounded-2xl border border-slate-800">
                <div class="p-6 border-b border-slate-800 flex items-center justify-between">
                    <h2 class="text-xl font-semibold">All Prospects</h2>
                    <div class="flex gap-3">
                        <select id="filter-status" onchange="filterProspects()" class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm">
                            <option value="all">All Status</option>
                            <option value="new">New</option>
                            <option value="contacted">Contacted</option>
                            <option value="qualified">Qualified</option>
                            <option value="converted">Converted</option>
                        </select>
                        <select id="filter-source" onchange="filterProspects()" class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm">
                            <option value="all">All Sources</option>
                            <option value="Facebook">Facebook</option>
                            <option value="LINE">LINE</option>
                            <option value="Telegram">Telegram</option>
                        </select>
                    </div>
                </div>
                <div class="divide-y divide-slate-800" id="all-prospects-list">
                    <div class="p-6 text-center text-slate-500">Loading...</div>
                </div>
            </div>
        </section>

        <!-- ============ COMMUNICATIONS SECTION ============ -->
        <section id="section-comms" class="section-content hidden">
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Telegram Channel -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800">
                    <div class="p-6 border-b border-slate-800 flex items-center gap-3">
                        <span class="text-2xl">üì±</span>
                        <div>
                            <h2 class="text-xl font-semibold">Telegram</h2>
                            <p class="text-sm text-slate-400">@TigerBotScout_bot</p>
                        </div>
                        <span class="ml-auto text-green-400 text-sm flex items-center gap-1">
                            <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Connected
                        </span>
                    </div>
                    <div class="p-6">
                        <div class="bg-slate-800 rounded-xl p-4 mb-4 h-64 overflow-y-auto" id="telegram-messages">
                            <div class="text-center text-slate-500 py-8">
                                <p>Messages will appear here</p>
                                <a href="https://t.me/TigerBotScout_bot" target="_blank" class="text-telegram-500 text-sm hover:underline">Open Telegram ‚Üí</a>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <input type="text" id="telegram-input" placeholder="Type a message..." class="flex-1 bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 focus:border-telegram-500 outline-none">
                            <button onclick="sendTelegramMessage()" class="px-6 bg-telegram-500 hover:bg-telegram-600 rounded-xl font-medium transition">Send</button>
                        </div>
                    </div>
                </div>

                <!-- LINE Channel -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800">
                    <div class="p-6 border-b border-slate-800 flex items-center gap-3">
                        <span class="text-2xl">üíö</span>
                        <div>
                            <h2 class="text-xl font-semibold">LINE</h2>
                            <p class="text-sm text-slate-400">Thai Market Channel</p>
                        </div>
                        <span class="ml-auto text-yellow-400 text-sm">Setup Required</span>
                    </div>
                    <div class="p-6">
                        <div class="text-center py-12">
                            <div class="text-6xl mb-4">üíö</div>
                            <h3 class="text-xl font-semibold mb-2">Connect LINE</h3>
                            <p class="text-slate-400 mb-6 max-w-xs mx-auto">Connect your LINE Official Account to reach prospects in Thailand.</p>
                            <button onclick="openLineSetup()" class="bg-line-500 hover:bg-line-600 px-6 py-3 rounded-xl font-medium transition">Setup LINE Integration</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Unified Inbox -->
            <div class="mt-8 bg-slate-900 rounded-2xl border border-slate-800">
                <div class="p-6 border-b border-slate-800">
                    <h2 class="text-xl font-semibold">Unified Inbox</h2>
                    <p class="text-sm text-slate-400">All conversations across channels</p>
                </div>
                <div class="p-6 text-center text-slate-500 py-12">
                    <p>Unified inbox coming soon</p>
                    <p class="text-sm mt-2">See all Telegram + LINE + Messenger conversations in one place</p>
                </div>
            </div>
        </section>

        <!-- ============ CUSTOMERS SECTION ============ -->
        <section id="section-customers" class="section-content hidden">
            <div class="mb-8 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold">Customers</h2>
                    <p class="text-slate-400">7 Tiger Bot subscribers ‚Ä¢ $693/mo MRR</p>
                </div>
                <button onclick="openAddCustomer()" class="bg-tiger-600 hover:bg-tiger-500 px-5 py-2.5 rounded-lg font-semibold transition flex items-center gap-2">
                    <span>+</span> Add Customer
                </button>
            </div>

            <!-- Customer Stats -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-slate-900 rounded-xl border border-slate-800 p-4 text-center">
                    <div class="text-3xl font-bold text-tiger-400">7</div>
                    <div class="text-sm text-slate-400">Total Customers</div>
                </div>
                <div class="bg-slate-900 rounded-xl border border-slate-800 p-4 text-center">
                    <div class="text-3xl font-bold text-yellow-400">7</div>
                    <div class="text-sm text-slate-400">Pending Setup</div>
                </div>
                <div class="bg-slate-900 rounded-xl border border-slate-800 p-4 text-center">
                    <div class="text-3xl font-bold text-green-400">0</div>
                    <div class="text-sm text-slate-400">Active</div>
                </div>
                <div class="bg-slate-900 rounded-xl border border-slate-800 p-4 text-center">
                    <div class="text-3xl font-bold text-green-400">$693</div>
                    <div class="text-sm text-slate-400">Monthly Revenue</div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Customer 1: Nancy Lim -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-pink-500/20 rounded-xl flex items-center justify-center text-2xl">üë©</div>
                            <div>
                                <h3 class="font-semibold">Nancy Lim</h3>
                                <p class="text-slate-400 text-sm">nancylimsk@gmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('nancy')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('nancylimsk@gmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>

                <!-- Customer 2: Chana Lohasaptawee -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center text-2xl">üë©</div>
                            <div>
                                <h3 class="font-semibold">Chana Lohasaptawee</h3>
                                <p class="text-slate-400 text-sm">chana.loh@gmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('chana')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('chana.loh@gmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>

                <!-- Customer 3: Phaitoon S. -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center text-2xl">üë®</div>
                            <div>
                                <h3 class="font-semibold">Phaitoon S.</h3>
                                <p class="text-slate-400 text-sm">phaitoon2010@gmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('phaitoon')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('phaitoon2010@gmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>

                <!-- Customer 4: Tarida Sukavanich -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center text-2xl">üë©</div>
                            <div>
                                <h3 class="font-semibold">Tarida Sukavanich</h3>
                                <p class="text-slate-400 text-sm">taridadew@gmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('tarida')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('taridadew@gmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>

                <!-- Customer 5: Lily Vergara -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center text-2xl">üë©</div>
                            <div>
                                <h3 class="font-semibold">Lily Vergara</h3>
                                <p class="text-slate-400 text-sm">lily.vergara@gmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('lily')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('lily.vergara@gmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>

                <!-- Customer 6: Theera Phetmalaigul -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center text-2xl">üë®</div>
                            <div>
                                <h3 class="font-semibold">Theera Phetmalaigul</h3>
                                <p class="text-slate-400 text-sm">phetmalaigul@gmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('theera')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('phetmalaigul@gmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>

                <!-- Customer 7: John & Noon -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-cyan-500/20 rounded-xl flex items-center justify-center text-2xl">üë´</div>
                            <div>
                                <h3 class="font-semibold">John & Noon</h3>
                                <p class="text-slate-400 text-sm">vijohn@hotmail.com</p>
                            </div>
                        </div>
                        <span class="bg-yellow-500/10 text-yellow-400 text-xs px-2 py-1 rounded-full">‚è≥ Pending Setup</span>
                    </div>
                    <div class="grid grid-cols-2 gap-3 mb-4 text-sm">
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Plan</div>
                            <div class="font-medium">Scout $99/mo</div>
                        </div>
                        <div class="bg-slate-800 rounded-lg p-2">
                            <div class="text-slate-500 text-xs">Signed Up</div>
                            <div class="font-medium">Feb 3, 2026</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="setupCustomerBot('johnnoon')" class="flex-1 bg-tiger-600 hover:bg-tiger-500 py-2 rounded-lg font-medium text-sm transition">Deploy Bot</button>
                        <button onclick="contactCustomer('vijohn@hotmail.com')" class="px-3 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚úâÔ∏è</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============ BOT FLEET SECTION ============ -->
        <section id="section-bots" class="section-content hidden">
            <div class="mb-8 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold">Bot Fleet Management</h2>
                    <p class="text-slate-400">Monitor and control all your bots</p>
                </div>
                <button onclick="openAddBot()" class="bg-tiger-600 hover:bg-tiger-500 px-5 py-2.5 rounded-lg font-semibold transition flex items-center gap-2">
                    <span>+</span> Add Bot
                </button>
            </div>

            <div class="grid md:grid-cols-2 gap-6">
                <!-- Agent Zero -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 bg-purple-500/20 rounded-xl flex items-center justify-center text-3xl">üîç</div>
                            <div>
                                <h3 class="text-xl font-semibold">Agent Zero</h3>
                                <p class="text-slate-400 text-sm">Prospect Discovery Engine</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                            <span class="text-green-400">Running</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Location</div>
                            <div class="font-medium">MacBook (Docker)</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Port</div>
                            <div class="font-medium">50001</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Schedule</div>
                            <div class="font-medium">Every 6 hours</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Last Run</div>
                            <div class="font-medium">2h ago</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="triggerDiscovery()" class="flex-1 bg-purple-600 hover:bg-purple-500 py-2 rounded-lg font-medium transition">Run Now</button>
                        <button class="px-4 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚öôÔ∏è</button>
                        <button class="px-4 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">üìä</button>
                    </div>
                </div>

                <!-- Tiger Bot Scout -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 bg-tiger-500/20 rounded-xl flex items-center justify-center text-3xl">üêØ</div>
                            <div>
                                <h3 class="text-xl font-semibold">Tiger Bot Scout</h3>
                                <p class="text-slate-400 text-sm">Telegram Reports & Scripts</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                            <span class="text-green-400">Online</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Location</div>
                            <div class="font-medium">Cloud Server</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Platform</div>
                            <div class="font-medium text-telegram-500">Telegram</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Daily Report</div>
                            <div class="font-medium">7:00 AM BKK</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Commands</div>
                            <div class="font-medium">12 today</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <a href="https://t.me/TigerBotScout_bot" target="_blank" class="flex-1 bg-telegram-500 hover:bg-telegram-600 py-2 rounded-lg font-medium text-center transition">Open Bot</a>
                        <button class="px-4 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚öôÔ∏è</button>
                        <button class="px-4 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">üìä</button>
                    </div>
                </div>

                <!-- Tiger Bot (OpenClaw) -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 bg-orange-500/20 rounded-xl flex items-center justify-center text-3xl">üî•</div>
                            <div>
                                <h3 class="text-xl font-semibold">Tiger Bot</h3>
                                <p class="text-slate-400 text-sm">Follow-up & Objection Handling</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-3 h-3 bg-yellow-400 rounded-full"></span>
                            <span class="text-yellow-400">Standby</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Location</div>
                            <div class="font-medium">Mac Pro (Docker)</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Engine</div>
                            <div class="font-medium">OpenClaw</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Port</div>
                            <div class="font-medium">19500</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Status</div>
                            <div class="font-medium">Docker stopped</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button class="flex-1 bg-orange-600 hover:bg-orange-500 py-2 rounded-lg font-medium transition">Start Docker</button>
                        <button class="px-4 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚öôÔ∏è</button>
                    </div>
                </div>

                <!-- Birdie Bot -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 bg-blue-500/20 rounded-xl flex items-center justify-center text-3xl">üê¶</div>
                            <div>
                                <h3 class="text-xl font-semibold">Birdie Bot</h3>
                                <p class="text-slate-400 text-sm">Personal Assistant</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></span>
                            <span class="text-green-400">Online</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Location</div>
                            <div class="font-medium">Mac Pro (Native)</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Engine</div>
                            <div class="font-medium">OpenClaw</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Platform</div>
                            <div class="font-medium text-telegram-500">Telegram</div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-3">
                            <div class="text-slate-400 text-sm">Uptime</div>
                            <div class="font-medium">3 days</div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <button class="flex-1 bg-blue-600 hover:bg-blue-500 py-2 rounded-lg font-medium transition">Open Chat</button>
                        <button class="px-4 bg-slate-800 hover:bg-slate-700 py-2 rounded-lg transition">‚öôÔ∏è</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============ SCRIPTS SECTION ============ -->
        <section id="section-scripts" class="section-content hidden">
            <div class="mb-8 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold">Scripts</h2>
                    <p class="text-slate-400">Generated approach scripts and their performance</p>
                </div>
                <div class="flex gap-3">
                    <select id="script-filter" onchange="filterScripts()" class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm">
                        <option value="all">All Scripts</option>
                        <option value="pending">Pending Feedback</option>
                        <option value="no_response">No Response</option>
                        <option value="got_reply">Got Reply</option>
                        <option value="converted">Converted</option>
                    </select>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Scripts History -->
                <div class="lg:col-span-2">
                    <div class="bg-slate-900 rounded-2xl border border-slate-800">
                        <div class="p-6 border-b border-slate-800">
                            <h3 class="text-xl font-semibold">Script History</h3>
                        </div>
                        <div id="scripts-list" class="divide-y divide-slate-800">
                            <div class="p-6 text-center text-slate-500">Loading...</div>
                        </div>
                    </div>
                </div>

                <!-- Winning Scripts Gallery -->
                <div class="space-y-6">
                    <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                        <h3 class="font-semibold mb-4">Winning Scripts Gallery</h3>
                        <p class="text-sm text-slate-400 mb-4">Top performing scripts you can reuse</p>
                        <div id="winning-scripts" class="space-y-4">
                            <div class="text-slate-500 text-sm">Loading...</div>
                        </div>
                    </div>

                    <!-- Generate Script -->
                    <div class="bg-gradient-to-br from-tiger-500/10 to-orange-600/10 rounded-2xl border border-tiger-500/20 p-6">
                        <h3 class="font-semibold mb-4">Generate New Script</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm text-slate-400 mb-2">Prospect Name</label>
                                <input type="text" id="gen-prospect-name" placeholder="Search prospect..." class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 focus:border-tiger-500 outline-none" list="prospect-datalist">
                                <datalist id="prospect-datalist"></datalist>
                            </div>
                            <button onclick="generateScript()" class="w-full bg-tiger-600 hover:bg-tiger-500 py-3 rounded-xl font-semibold transition flex items-center justify-center gap-2">
                                <span>üêØ</span> Generate Script
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Script Detail Modal -->
            <div id="script-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold">Script Details</h3>
                        <button onclick="closeScriptModal()" class="text-slate-400 hover:text-white">‚úï</button>
                    </div>
                    <div id="script-modal-content">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>
        </section>

        <!-- ============ HIVE LEARNINGS SECTION ============ -->
        <section id="section-hive" class="section-content hidden">
            <div class="mb-8">
                <h2 class="text-2xl font-bold">Hive Learnings</h2>
                <p class="text-slate-400">Scripts that work, shared across the Tiger Bot network</p>
            </div>

            <!-- Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Total Learnings</div>
                    <div class="text-3xl font-bold" id="hive-total-learnings">0</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Total Successes</div>
                    <div class="text-3xl font-bold text-green-400" id="hive-total-successes">0</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">This Week</div>
                    <div class="text-3xl font-bold text-tiger-400" id="hive-this-week">0</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Best Source</div>
                    <div class="text-2xl font-bold" id="hive-best-source">--</div>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-8 mb-8">
                <!-- Source Performance -->
                <div class="lg:col-span-2 bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Source Performance</h3>
                    <div id="source-performance" class="space-y-4">
                        <div class="text-slate-500 text-center py-8">Loading...</div>
                    </div>
                </div>

                <!-- Script Performance Stats -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="font-semibold mb-4">Script Stats</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-slate-400">Total Scripts</span>
                            <span class="font-bold" id="fb-total">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-400">With Feedback</span>
                            <span class="font-bold" id="fb-with-feedback">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-400">Conversion Rate</span>
                            <span class="font-bold text-green-400" id="fb-conversion">0%</span>
                        </div>
                        <div class="h-px bg-slate-800 my-2"></div>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-red-500 rounded-full"></span>No Response</div>
                            <span id="fb-no-response">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-blue-500 rounded-full"></span>Got Reply</div>
                            <span id="fb-got-reply">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2"><span class="w-3 h-3 bg-green-500 rounded-full"></span>Converted</div>
                            <span id="fb-converted">0</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-8 mb-8">
                <!-- Activity Trends Chart -->
                <div class="lg:col-span-2 bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Activity Trends (Last 30 Days)</h3>
                    <div id="trends-chart" class="h-64 relative">
                        <div class="text-slate-500 text-center py-8">Loading...</div>
                    </div>
                </div>

                <!-- Top Signals -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="font-semibold mb-4">Top Signals</h3>
                    <p class="text-xs text-slate-500 mb-4">What prospects say that leads to conversions</p>
                    <div id="top-signals" class="space-y-3">
                        <div class="text-slate-500 text-sm">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Leaderboard -->
                <div class="lg:col-span-2">
                    <div class="bg-slate-900 rounded-2xl border border-slate-800">
                        <div class="p-6 border-b border-slate-800">
                            <h3 class="text-xl font-semibold">Top Converting Scripts</h3>
                        </div>
                        <div id="hive-leaderboard" class="divide-y divide-slate-800">
                            <div class="p-6 text-center text-slate-500">Loading...</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Feedback -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="font-semibold mb-4">Recent Feedback</h3>
                    <div id="recent-feedback" class="space-y-3">
                        <div class="text-slate-500 text-sm">Loading...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============ ANALYTICS SECTION ============ -->
        <section id="section-analytics" class="section-content hidden">
            <div class="mb-8 flex items-center justify-between">
                <div>
                    <h2 class="text-2xl font-bold">Analytics</h2>
                    <p class="text-slate-400">Conversion rates, prospect quality trends, bot performance</p>
                </div>
                <div class="flex gap-3">
                    <select id="analytics-period" onchange="updateAnalytics()" class="bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm">
                        <option value="7">Last 7 days</option>
                        <option value="30" selected>Last 30 days</option>
                        <option value="90">Last 90 days</option>
                        <option value="all">All time</option>
                    </select>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Total Prospects</div>
                    <div class="text-3xl font-bold" id="analytics-total">0</div>
                    <div class="text-sm text-green-400 mt-1" id="analytics-total-change">--</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Conversion Rate</div>
                    <div class="text-3xl font-bold text-green-400" id="analytics-conversion">0%</div>
                    <div class="text-sm text-slate-400 mt-1">New ‚Üí Converted</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Avg. Score</div>
                    <div class="text-3xl font-bold" id="analytics-avg-score">0</div>
                    <div class="text-sm text-slate-400 mt-1">AI quality score</div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <div class="text-slate-400 text-sm mb-2">Script Success</div>
                    <div class="text-3xl font-bold text-tiger-400" id="analytics-script-success">0%</div>
                    <div class="text-sm text-slate-400 mt-1">Reply + Converted</div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 mb-8">
                <!-- Conversion Funnel -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Conversion Funnel</h3>
                    <div class="space-y-4">
                        <div class="relative">
                            <div class="flex items-center gap-4">
                                <div class="w-full bg-blue-500/20 rounded-lg p-4">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">New</span>
                                        <span class="text-2xl font-bold" id="funnel-new">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center text-slate-500 text-sm">‚Üì <span id="funnel-rate-1">0%</span></div>
                        <div class="relative">
                            <div class="flex items-center gap-4">
                                <div class="w-11/12 mx-auto bg-yellow-500/20 rounded-lg p-4">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Contacted</span>
                                        <span class="text-2xl font-bold" id="funnel-contacted">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center text-slate-500 text-sm">‚Üì <span id="funnel-rate-2">0%</span></div>
                        <div class="relative">
                            <div class="flex items-center gap-4">
                                <div class="w-10/12 mx-auto bg-green-500/20 rounded-lg p-4">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Qualified</span>
                                        <span class="text-2xl font-bold" id="funnel-qualified">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center text-slate-500 text-sm">‚Üì <span id="funnel-rate-3">0%</span></div>
                        <div class="relative">
                            <div class="flex items-center gap-4">
                                <div class="w-9/12 mx-auto bg-tiger-500/20 rounded-lg p-4">
                                    <div class="flex justify-between items-center">
                                        <span class="font-medium">Converted</span>
                                        <span class="text-2xl font-bold" id="funnel-converted">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ROI Calculator -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">ROI Calculator</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm text-slate-400 mb-2">Avg. Deal Value ($)</label>
                            <input type="number" id="roi-deal-value" value="500" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 focus:border-tiger-500 outline-none" onchange="calculateROI()">
                        </div>
                        <div>
                            <label class="block text-sm text-slate-400 mb-2">Monthly Subscription ($)</label>
                            <input type="number" id="roi-subscription" value="99" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2" disabled>
                        </div>
                        <div class="h-px bg-slate-800 my-4"></div>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-slate-800 rounded-xl p-4 text-center">
                                <div class="text-sm text-slate-400 mb-1">Prospects Found</div>
                                <div class="text-2xl font-bold" id="roi-prospects">0</div>
                            </div>
                            <div class="bg-slate-800 rounded-xl p-4 text-center">
                                <div class="text-sm text-slate-400 mb-1">Conversions</div>
                                <div class="text-2xl font-bold text-green-400" id="roi-conversions">0</div>
                            </div>
                            <div class="bg-slate-800 rounded-xl p-4 text-center">
                                <div class="text-sm text-slate-400 mb-1">Revenue</div>
                                <div class="text-2xl font-bold text-tiger-400">$<span id="roi-revenue">0</span></div>
                            </div>
                            <div class="bg-slate-800 rounded-xl p-4 text-center">
                                <div class="text-sm text-slate-400 mb-1">ROI</div>
                                <div class="text-2xl font-bold text-green-400" id="roi-percent">0%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Prospects Over Time -->
            <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6 mb-8">
                <h3 class="text-xl font-semibold mb-6">Prospects Over Time</h3>
                <div id="prospects-timeline" class="h-48">
                    <div class="text-slate-500 text-center py-8">Loading...</div>
                </div>
            </div>

            <!-- Score Distribution & Best Times -->
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Score Distribution</h3>
                    <div id="score-distribution" class="space-y-3">
                        <div class="text-slate-500 text-center py-8">Loading...</div>
                    </div>
                </div>
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Best Sources</h3>
                    <div id="best-sources" class="space-y-3">
                        <div class="text-slate-500 text-center py-8">Loading...</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ============ SETTINGS SECTION ============ -->
        <section id="section-settings" class="section-content hidden">
            <div class="mb-8">
                <h2 class="text-2xl font-bold">Settings</h2>
                <p class="text-slate-400">Configure your Tiger Bot Scout</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Bot Configuration -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Bot Configuration</h3>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm text-slate-400 mb-2">Daily Report Time (Bangkok)</label>
                            <select id="settings-report-time" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3">
                                <option value="6">6:00 AM</option>
                                <option value="7" selected>7:00 AM</option>
                                <option value="8">8:00 AM</option>
                                <option value="9">9:00 AM</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-slate-400 mb-2">Discovery Schedule</label>
                            <select id="settings-discovery-schedule" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3">
                                <option value="2">Every 2 hours</option>
                                <option value="4">Every 4 hours</option>
                                <option value="6" selected>Every 6 hours</option>
                                <option value="12">Every 12 hours</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-slate-400 mb-2">Minimum Score Threshold</label>
                            <input type="number" id="settings-min-score" value="70" min="0" max="100" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3">
                            <p class="text-xs text-slate-500 mt-1">Only show prospects with score above this</p>
                        </div>
                    </div>
                </div>

                <!-- Notification Preferences -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Notifications</h3>
                    <div class="space-y-4">
                        <label class="flex items-center justify-between p-4 bg-slate-800 rounded-xl cursor-pointer">
                            <div>
                                <div class="font-medium">Daily Report</div>
                                <div class="text-sm text-slate-400">Receive morning prospect summary</div>
                            </div>
                            <input type="checkbox" id="notify-daily" checked class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-tiger-500 focus:ring-tiger-500">
                        </label>
                        <label class="flex items-center justify-between p-4 bg-slate-800 rounded-xl cursor-pointer">
                            <div>
                                <div class="font-medium">High Score Alerts</div>
                                <div class="text-sm text-slate-400">Alert when prospect scores 80+</div>
                            </div>
                            <input type="checkbox" id="notify-high-score" checked class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-tiger-500 focus:ring-tiger-500">
                        </label>
                        <label class="flex items-center justify-between p-4 bg-slate-800 rounded-xl cursor-pointer">
                            <div>
                                <div class="font-medium">Weekly Digest</div>
                                <div class="text-sm text-slate-400">Weekly performance summary</div>
                            </div>
                            <input type="checkbox" id="notify-weekly" class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-tiger-500 focus:ring-tiger-500">
                        </label>
                    </div>
                </div>

                <!-- Discovery Sources -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">Discovery Sources</h3>
                    <div class="space-y-4">
                        <label class="flex items-center justify-between p-4 bg-slate-800 rounded-xl cursor-pointer">
                            <div class="flex items-center gap-3">
                                <span class="text-2xl">üíö</span>
                                <div>
                                    <div class="font-medium">LINE OpenChat</div>
                                    <div class="text-sm text-slate-400">Thai side-income groups</div>
                                </div>
                            </div>
                            <input type="checkbox" id="source-line" checked class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-green-500 focus:ring-green-500">
                        </label>
                        <label class="flex items-center justify-between p-4 bg-slate-800 rounded-xl cursor-pointer">
                            <div class="flex items-center gap-3">
                                <span class="text-2xl">üìò</span>
                                <div>
                                    <div class="font-medium">Facebook Groups</div>
                                    <div class="text-sm text-slate-400">Thai entrepreneur groups</div>
                                </div>
                            </div>
                            <input type="checkbox" id="source-facebook" checked class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-blue-500 focus:ring-blue-500">
                        </label>
                        <label class="flex items-center justify-between p-4 bg-slate-800 rounded-xl cursor-pointer opacity-50">
                            <div class="flex items-center gap-3">
                                <span class="text-2xl">üíº</span>
                                <div>
                                    <div class="font-medium">LinkedIn</div>
                                    <div class="text-sm text-slate-400">Coming soon</div>
                                </div>
                            </div>
                            <input type="checkbox" id="source-linkedin" disabled class="w-5 h-5 rounded bg-slate-700 border-slate-600">
                        </label>
                    </div>
                </div>

                <!-- API Status -->
                <div class="bg-slate-900 rounded-2xl border border-slate-800 p-6">
                    <h3 class="text-xl font-semibold mb-6">System Status</h3>
                    <div class="space-y-4" id="system-status">
                        <div class="flex items-center justify-between p-4 bg-slate-800 rounded-xl">
                            <div class="flex items-center gap-3">
                                <span class="text-xl">üêØ</span>
                                <span>Tiger Bot API</span>
                            </div>
                            <span class="flex items-center gap-2 text-green-400">
                                <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Connected
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-slate-800 rounded-xl">
                            <div class="flex items-center gap-3">
                                <span class="text-xl">üì±</span>
                                <span>Telegram Bot</span>
                            </div>
                            <span class="flex items-center gap-2 text-green-400">
                                <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span> Online
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-slate-800 rounded-xl">
                            <div class="flex items-center gap-3">
                                <span class="text-xl">ü§ñ</span>
                                <span>AI Service (Claude)</span>
                            </div>
                            <span id="ai-status" class="flex items-center gap-2 text-green-400">
                                <span class="w-2 h-2 bg-green-400 rounded-full"></span> Ready
                            </span>
                        </div>
                        <div class="flex items-center justify-between p-4 bg-slate-800 rounded-xl">
                            <div class="flex items-center gap-3">
                                <span class="text-xl">üóÑÔ∏è</span>
                                <span>Database</span>
                            </div>
                            <span class="flex items-center gap-2 text-green-400">
                                <span class="w-2 h-2 bg-green-400 rounded-full"></span> Connected
                            </span>
                        </div>
                    </div>
                    <button onclick="testConnections()" class="w-full mt-4 py-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition">
                        üîÑ Test All Connections
                    </button>
                </div>
            </div>

            <!-- Save Button -->
            <div class="mt-8 flex justify-end">
                <button onclick="saveSettings()" class="px-8 py-3 bg-tiger-600 hover:bg-tiger-500 rounded-xl font-semibold transition">
                    Save Settings
                </button>
            </div>
        </section>
    </main>

    <!-- LINE Setup Modal -->
    <div id="line-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden items-center justify-center z-50">
        <div class="bg-slate-900 rounded-2xl border border-slate-800 p-8 max-w-lg w-full mx-4">
            <h3 class="text-xl font-semibold mb-4">Connect LINE Official Account</h3>
            <p class="text-slate-400 mb-6">To connect LINE, you'll need a LINE Official Account and Messaging API credentials.</p>
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block text-sm text-slate-400 mb-2">Channel Access Token</label>
                    <input type="text" id="line-token" placeholder="Enter your LINE channel access token" class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 focus:border-line-500 outline-none">
                </div>
                <div>
                    <label class="block text-sm text-slate-400 mb-2">Channel Secret</label>
                    <input type="password" id="line-secret" placeholder="Enter your LINE channel secret" class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 focus:border-line-500 outline-none">
                </div>
            </div>
            <div class="flex gap-3">
                <button onclick="connectLine()" class="flex-1 bg-line-500 hover:bg-line-600 py-3 rounded-xl font-semibold transition">Connect LINE</button>
                <button onclick="closeLineSetup()" class="px-6 bg-slate-800 hover:bg-slate-700 py-3 rounded-xl transition">Cancel</button>
            </div>
            <p class="text-center text-slate-500 text-sm mt-4">
                <a href="https://developers.line.biz/console/" target="_blank" class="text-line-500 hover:underline">Get credentials from LINE Developers Console ‚Üí</a>
            </p>
        </div>
    </div>

    <script>
        const API_BASE = 'https://api.botcraftwrks.ai';
        let allProspects = [];

        // Navigation
        function showSection(section) {
            document.querySelectorAll('.section-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`section-${section}`).classList.remove('hidden');
            document.querySelectorAll('.nav-link').forEach(el => {
                el.classList.remove('bg-tiger-500/10', 'text-tiger-400', 'font-medium');
                el.classList.add('text-slate-400');
            });
            document.querySelector(`[data-section="${section}"]`).classList.add('bg-tiger-500/10', 'text-tiger-400', 'font-medium');
            document.querySelector(`[data-section="${section}"]`).classList.remove('text-slate-400');
        }

        // Data fetching
        async function refreshData() {
            try {
                const statsRes = await fetch(`${API_BASE}/ai-crm/stats`);
                const stats = await statsRes.json();

                document.getElementById('stat-total').textContent = stats.total || 0;
                document.getElementById('stat-week').textContent = `+${stats.this_week || 0} this week`;

                const byStatus = stats.by_status || {};
                document.getElementById('pipe-new').textContent = byStatus.new || 0;
                document.getElementById('pipe-contacted').textContent = byStatus.contacted || 0;
                document.getElementById('pipe-qualified').textContent = byStatus.qualified || 0;
                document.getElementById('pipe-converted').textContent = byStatus.converted || 0;

                // Update funnel on analytics page
                updateFunnel(stats);

                const prospectsRes = await fetch(`${API_BASE}/ai-crm/leads?limit=50`);
                const prospectsData = await prospectsRes.json();
                allProspects = prospectsData.leads || [];

                const qualified = allProspects.filter(p => p.ai_score >= 70).length;
                document.getElementById('stat-qualified').textContent = qualified;
                document.getElementById('stat-messages').textContent = Math.floor(Math.random() * 20) + 5; // Placeholder

                renderProspects(allProspects.slice(0, 5), 'prospects-list');
                renderProspects(allProspects, 'all-prospects-list');
            } catch (err) {
                console.error('Error:', err);
            }
        }

        function renderProspects(prospects, containerId) {
            const container = document.getElementById(containerId);
            if (!prospects.length) {
                container.innerHTML = '<div class="p-6 text-center text-slate-500">No prospects yet</div>';
                return;
            }
            container.innerHTML = prospects.map(p => {
                const scoreColor = p.ai_score >= 80 ? 'text-green-400' : p.ai_score >= 70 ? 'text-yellow-400' : 'text-slate-400';
                const statusColors = { new: 'bg-blue-500/10 text-blue-400', contacted: 'bg-yellow-500/10 text-yellow-400', qualified: 'bg-green-500/10 text-green-400', converted: 'bg-tiger-500/10 text-tiger-400' };
                const date = new Date(p.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                return `
                    <div class="p-4 hover:bg-slate-800/50 transition cursor-pointer">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center font-semibold text-tiger-400">${p.name.charAt(0).toUpperCase()}</div>
                                <div>
                                    <div class="font-medium">${p.name}</div>
                                    <div class="text-sm text-slate-500">${p.source} ¬∑ ${date}</div>
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="px-2 py-1 rounded-lg text-xs font-medium ${statusColors[p.status] || statusColors.new}">${p.status}</span>
                                <span class="font-bold ${scoreColor}">${p.ai_score}</span>
                            </div>
                        </div>
                        ${p.notes ? `<p class="text-sm text-slate-400 truncate">${p.notes}</p>` : ''}
                    </div>`;
            }).join('');
        }

        function filterProspects() {
            const status = document.getElementById('filter-status').value;
            const source = document.getElementById('filter-source').value;
            let filtered = allProspects;
            if (status !== 'all') filtered = filtered.filter(p => p.status === status);
            if (source !== 'all') filtered = filtered.filter(p => p.source.includes(source));
            renderProspects(filtered, 'all-prospects-list');
        }

        // Actions
        function triggerDiscovery() {
            alert('Triggering Agent Zero discovery scan...\n\nThis would call the Agent Zero API to run the prospect discovery task immediately.');
        }

        function sendDailyReport() {
            window.open('https://t.me/TigerBotScout_bot?start=report', '_blank');
        }

        function openBroadcast() {
            alert('Broadcast feature coming soon!\n\nSend a message to all connected channels (Telegram + LINE) at once.');
        }

        function sendTelegramMessage() {
            const msg = document.getElementById('telegram-input').value;
            if (msg) {
                window.open(`https://t.me/TigerBotScout_bot?start=${encodeURIComponent(msg)}`, '_blank');
                document.getElementById('telegram-input').value = '';
            }
        }

        // LINE Setup
        function openLineSetup() {
            document.getElementById('line-modal').classList.remove('hidden');
            document.getElementById('line-modal').classList.add('flex');
        }

        function closeLineSetup() {
            document.getElementById('line-modal').classList.add('hidden');
            document.getElementById('line-modal').classList.remove('flex');
        }

        function connectLine() {
            const token = document.getElementById('line-token').value;
            const secret = document.getElementById('line-secret').value;
            if (token && secret) {
                alert('LINE integration would be saved to the server.\n\nToken: ' + token.substring(0, 20) + '...');
                closeLineSetup();
            }
        }

        function openAddBot() {
            alert('Add Bot wizard coming soon!\n\nThis will let you:\n- Create a new Telegram bot\n- Connect a LINE Official Account\n- Deploy an Agent Zero instance');
        }

        // Customer management functions
        function openAddCustomer() {
            alert('Add Customer form coming soon!\n\nCustomers will be auto-added when they:\n- Purchase via Stan Store\n- Sign up on BotCraftWrks.ai');
        }

        function setupCustomerBot(customerId) {
            const customers = {
                nancy: { name: 'Nancy Lim', email: 'nancylimsk@gmail.com' },
                chana: { name: 'Chana Lohasaptawee', email: 'chana.loh@gmail.com' },
                phaitoon: { name: 'Phaitoon S.', email: 'phaitoon2010@gmail.com' },
                tarida: { name: 'Tarida Sukavanich', email: 'taridadew@gmail.com' },
                lily: { name: 'Lily Vergara', email: 'lily.vergara@gmail.com' },
                theera: { name: 'Theera Phetmalaigul', email: 'phetmalaigul@gmail.com' },
                johnnoon: { name: 'John & Noon', email: 'vijohn@hotmail.com' }
            };
            const customer = customers[customerId];
            if (customer) {
                alert(`Deploy Tiger Bot for ${customer.name}\n\nThis will:\n1. Create a dedicated Telegram bot via BotFather\n2. Configure their discovery preferences\n3. Set up daily report schedule\n4. Send welcome message with bot link\n\nEmail: ${customer.email}`);
            }
        }

        function contactCustomer(email) {
            window.open(`mailto:${email}?subject=Your Tiger Bot Setup&body=Hi! Your Tiger Bot is ready...`, '_blank');
        }

        // Fetch feedback stats
        async function fetchFeedbackStats() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/feedback/stats`);
                const data = await res.json();

                document.getElementById('stat-scripts').textContent = data.total_scripts || 0;
                document.getElementById('stat-converted').textContent = data.by_feedback?.converted || 0;
                document.getElementById('stat-success-rate').textContent = (data.conversion_rate || 0) + '%';

                // Hive stats page
                document.getElementById('fb-total').textContent = data.total_scripts || 0;
                document.getElementById('fb-with-feedback').textContent = data.with_feedback || 0;
                document.getElementById('fb-conversion').textContent = (data.conversion_rate || 0) + '%';
                document.getElementById('fb-no-response').textContent = data.by_feedback?.no_response || 0;
                document.getElementById('fb-got-reply').textContent = data.by_feedback?.got_reply || 0;
                document.getElementById('fb-converted').textContent = data.by_feedback?.converted || 0;
            } catch (err) {
                console.error('Feedback stats error:', err);
            }
        }

        // Fetch hive leaderboard
        async function fetchHiveLeaderboard() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/hive/leaderboard`);
                const data = await res.json();
                const leaderboard = data.leaderboard || [];

                // Update hive count
                document.getElementById('hive-count').textContent = leaderboard.length;

                // Update top script preview on dashboard
                if (leaderboard.length > 0) {
                    const top = leaderboard[0];
                    document.getElementById('hive-script-preview').textContent = top.content?.substring(0, 150) + '...' || 'No scripts yet';
                    document.getElementById('hive-script-success').textContent = top.success_count || 0;
                } else {
                    document.getElementById('hive-script-preview').textContent = 'No winning scripts yet. Use /script in Telegram and give feedback!';
                    document.getElementById('hive-script-success').textContent = '0';
                }

                // Render leaderboard
                const container = document.getElementById('hive-leaderboard');
                if (leaderboard.length === 0) {
                    container.innerHTML = '<div class="p-6 text-center text-slate-500">No learnings yet. Scripts with positive feedback will appear here.</div>';
                    return;
                }

                container.innerHTML = leaderboard.map((item, i) => {
                    const context = item.context || {};
                    return `
                        <div class="p-4 hover:bg-slate-800/50 transition">
                            <div class="flex items-start gap-4">
                                <div class="w-8 h-8 bg-tiger-500/20 rounded-lg flex items-center justify-center font-bold text-tiger-400">${i + 1}</div>
                                <div class="flex-1">
                                    <p class="text-sm text-slate-300 mb-2">${item.content?.substring(0, 200) || 'No content'}...</p>
                                    <div class="flex items-center gap-3 text-xs">
                                        <span class="bg-green-500/10 text-green-400 px-2 py-0.5 rounded">üéØ ${item.success_count} successes</span>
                                        ${context.source ? `<span class="bg-slate-700 text-slate-400 px-2 py-0.5 rounded">${context.source}</span>` : ''}
                                        <span class="text-slate-500">${item.learning_type?.replace('winning_', '') || 'script'}</span>
                                    </div>
                                </div>
                            </div>
                        </div>`;
                }).join('');
            } catch (err) {
                console.error('Hive leaderboard error:', err);
            }
        }

        // Fetch recent feedback
        async function fetchRecentFeedback() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/feedback/recent?limit=5`);
                const data = await res.json();
                const feedback = data.feedback || [];

                const container = document.getElementById('recent-feedback');
                if (feedback.length === 0) {
                    container.innerHTML = '<div class="text-slate-500 text-sm">No feedback yet</div>';
                    return;
                }

                const feedbackIcons = { no_response: 'üëé', got_reply: 'üëç', converted: 'üéØ' };
                const feedbackColors = { no_response: 'text-red-400', got_reply: 'text-blue-400', converted: 'text-green-400' };

                container.innerHTML = feedback.map(f => {
                    const icon = feedbackIcons[f.feedback] || '‚ùì';
                    const color = feedbackColors[f.feedback] || 'text-slate-400';
                    const name = f.prospect_name || 'Unknown';
                    const time = f.feedback_at ? new Date(f.feedback_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) : '';
                    return `
                        <div class="flex items-center gap-3 text-sm">
                            <span class="text-lg">${icon}</span>
                            <div class="flex-1">
                                <span class="${color}">${f.feedback?.replace('_', ' ')}</span>
                                <span class="text-slate-500"> ‚Ä¢ ${name}</span>
                            </div>
                            <span class="text-slate-600 text-xs">${time}</span>
                        </div>`;
                }).join('');
            } catch (err) {
                console.error('Recent feedback error:', err);
            }
        }

        // Scripts data
        let allScripts = [];

        // Fetch scripts history (include pending = all scripts)
        async function fetchScripts() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/feedback/recent?limit=50&include_pending=true`);
                const data = await res.json();
                allScripts = data.feedback || [];
                renderScripts(allScripts);
                populateProspectDatalist();
            } catch (err) {
                console.error('Scripts fetch error:', err);
            }
        }

        // Filter scripts
        function filterScripts() {
            const filter = document.getElementById('script-filter').value;
            let filtered = allScripts;
            if (filter === 'pending') {
                filtered = allScripts.filter(s => !s.feedback);
            } else if (filter !== 'all') {
                filtered = allScripts.filter(s => s.feedback === filter);
            }
            renderScripts(filtered);
        }

        // Render scripts list
        function renderScripts(scripts) {
            const container = document.getElementById('scripts-list');
            if (!scripts.length) {
                container.innerHTML = '<div class="p-6 text-center text-slate-500">No scripts found. Generate one using /script in Telegram!</div>';
                return;
            }

            const feedbackIcons = { no_response: 'üëé', got_reply: 'üëç', converted: 'üéØ' };
            const feedbackColors = { no_response: 'bg-red-500/10 text-red-400', got_reply: 'bg-blue-500/10 text-blue-400', converted: 'bg-green-500/10 text-green-400' };

            container.innerHTML = scripts.map(s => {
                const icon = s.feedback ? feedbackIcons[s.feedback] : '‚è≥';
                const colorClass = s.feedback ? feedbackColors[s.feedback] : 'bg-yellow-500/10 text-yellow-400';
                const statusText = s.feedback ? s.feedback.replace('_', ' ') : 'pending';
                const date = s.created_at ? new Date(s.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) : '';
                const preview = s.script_text?.substring(0, 150) || 'No content';

                return `
                    <div class="p-4 hover:bg-slate-800/50 transition cursor-pointer" onclick="openScriptModal('${s.id}')">
                        <div class="flex items-start gap-4">
                            <div class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center text-xl">${icon}</div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center gap-3 mb-1">
                                    <span class="font-medium">${s.prospect_name || 'Unknown'}</span>
                                    <span class="text-xs ${colorClass} px-2 py-0.5 rounded">${statusText}</span>
                                    <span class="text-xs text-slate-500">${date}</span>
                                </div>
                                <p class="text-sm text-slate-400 truncate">${preview}...</p>
                            </div>
                            ${!s.feedback ? `
                                <div class="flex gap-1">
                                    <button onclick="event.stopPropagation(); submitFeedback('${s.id}', 'no_response')" class="p-2 hover:bg-red-500/20 rounded-lg transition" title="No Response">üëé</button>
                                    <button onclick="event.stopPropagation(); submitFeedback('${s.id}', 'got_reply')" class="p-2 hover:bg-blue-500/20 rounded-lg transition" title="Got Reply">üëç</button>
                                    <button onclick="event.stopPropagation(); submitFeedback('${s.id}', 'converted')" class="p-2 hover:bg-green-500/20 rounded-lg transition" title="Converted!">üéØ</button>
                                </div>
                            ` : ''}
                        </div>
                    </div>`;
            }).join('');
        }

        // Open script modal
        function openScriptModal(scriptId) {
            const script = allScripts.find(s => s.id === scriptId);
            if (!script) return;

            const feedbackIcons = { no_response: 'üëé', got_reply: 'üëç', converted: 'üéØ' };
            const content = document.getElementById('script-modal-content');

            content.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-sm text-slate-400">Prospect:</span>
                        <span class="font-medium">${script.prospect_name || 'Unknown'}</span>
                        ${script.source ? `<span class="text-xs bg-slate-700 px-2 py-0.5 rounded">${script.source}</span>` : ''}
                    </div>
                    <div class="flex items-center gap-3 mb-4">
                        <span class="text-sm text-slate-400">Status:</span>
                        <span class="text-lg">${script.feedback ? feedbackIcons[script.feedback] : '‚è≥'}</span>
                        <span>${script.feedback ? script.feedback.replace('_', ' ') : 'Pending feedback'}</span>
                    </div>
                </div>
                <div class="bg-slate-800 rounded-xl p-4 mb-6">
                    <div class="text-xs text-slate-500 mb-2">GENERATED SCRIPT</div>
                    <p class="text-slate-200 whitespace-pre-wrap">${script.script_text || 'No content'}</p>
                </div>
                ${!script.feedback ? `
                    <div class="mb-6">
                        <div class="text-sm text-slate-400 mb-3">How did this script perform?</div>
                        <div class="flex gap-3">
                            <button onclick="submitFeedback('${script.id}', 'no_response'); closeScriptModal();" class="flex-1 py-3 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl transition">üëé No Response</button>
                            <button onclick="submitFeedback('${script.id}', 'got_reply'); closeScriptModal();" class="flex-1 py-3 bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 rounded-xl transition">üëç Got Reply</button>
                            <button onclick="submitFeedback('${script.id}', 'converted'); closeScriptModal();" class="flex-1 py-3 bg-green-500/10 hover:bg-green-500/20 text-green-400 rounded-xl transition">üéØ Converted!</button>
                        </div>
                    </div>
                ` : ''}
                <div class="flex gap-3">
                    <button onclick="copyScript('${script.id}')" class="flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition">üìã Copy Script</button>
                    <button onclick="closeScriptModal()" class="px-6 py-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition">Close</button>
                </div>
            `;

            document.getElementById('script-modal').classList.remove('hidden');
            document.getElementById('script-modal').classList.add('flex');
        }

        function closeScriptModal() {
            document.getElementById('script-modal').classList.add('hidden');
            document.getElementById('script-modal').classList.remove('flex');
        }

        function copyScript(scriptId) {
            const script = allScripts.find(s => s.id === scriptId);
            if (script?.script_text) {
                navigator.clipboard.writeText(script.script_text);
                alert('Script copied to clipboard!');
            }
        }

        // Submit feedback from dashboard
        async function submitFeedback(scriptId, feedback) {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/feedback/${scriptId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ feedback })
                });

                if (res.ok) {
                    // Refresh data
                    await fetchScripts();
                    await fetchFeedbackStats();
                    await fetchHiveLeaderboard();
                    await fetchRecentFeedback();
                } else {
                    alert('Error submitting feedback');
                }
            } catch (err) {
                console.error('Feedback submit error:', err);
                alert('Error submitting feedback');
            }
        }

        // Fetch winning scripts for gallery
        async function fetchWinningScripts() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/hive/learnings?limit=5`);
                const data = await res.json();
                const learnings = data.learnings || [];

                const container = document.getElementById('winning-scripts');
                if (!learnings.length) {
                    container.innerHTML = '<div class="text-slate-500 text-sm">No winning scripts yet. Keep using and rating scripts!</div>';
                    return;
                }

                container.innerHTML = learnings.map(l => `
                    <div class="bg-slate-800 rounded-xl p-3">
                        <p class="text-sm text-slate-300 mb-2">${l.content?.substring(0, 100) || ''}...</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs bg-green-500/10 text-green-400 px-2 py-0.5 rounded">üéØ ${l.success_count}x</span>
                            <button onclick="useWinningScript(\`${encodeURIComponent(l.content || '')}\`)" class="text-xs text-tiger-400 hover:underline">Use this</button>
                        </div>
                    </div>
                `).join('');
            } catch (err) {
                console.error('Winning scripts error:', err);
            }
        }

        function useWinningScript(encodedContent) {
            const content = decodeURIComponent(encodedContent);
            navigator.clipboard.writeText(content);
            alert('Winning script copied to clipboard!');
        }

        // Populate prospect datalist for script generation
        function populateProspectDatalist() {
            const datalist = document.getElementById('prospect-datalist');
            datalist.innerHTML = allProspects.map(p => `<option value="${p.name}">`).join('');
        }

        // Generate script from dashboard
        async function generateScript() {
            const name = document.getElementById('gen-prospect-name').value.trim();
            if (!name) {
                alert('Please enter a prospect name');
                return;
            }

            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '‚è≥ Generating...';

            try {
                const res = await fetch(`${API_BASE}/ai-crm/scripts/generate`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prospect_name: name })
                });

                const data = await res.json();

                if (res.ok && data.script) {
                    // Show the generated script in a modal
                    const content = document.getElementById('script-modal-content');
                    content.innerHTML = `
                        <div class="mb-6">
                            <div class="flex items-center gap-3 mb-4">
                                <span class="text-sm text-slate-400">Prospect:</span>
                                <span class="font-medium">${data.prospect?.name || name}</span>
                            </div>
                        </div>
                        <div class="bg-slate-800 rounded-xl p-4 mb-6">
                            <div class="text-xs text-slate-500 mb-2">GENERATED SCRIPT</div>
                            <p class="text-slate-200 whitespace-pre-wrap">${data.script}</p>
                        </div>
                        <div class="flex gap-3">
                            <button onclick="navigator.clipboard.writeText(\`${data.script.replace(/`/g, '\\`')}\`); alert('Copied!');" class="flex-1 py-3 bg-tiger-600 hover:bg-tiger-500 rounded-xl transition">üìã Copy Script</button>
                            <button onclick="closeScriptModal()" class="px-6 py-3 bg-slate-800 hover:bg-slate-700 rounded-xl transition">Close</button>
                        </div>
                    `;
                    document.getElementById('script-modal').classList.remove('hidden');
                    document.getElementById('script-modal').classList.add('flex');

                    // Refresh scripts list
                    await fetchScripts();
                } else {
                    alert(data.error || 'Error generating script');
                }
            } catch (err) {
                console.error('Generate script error:', err);
                alert('Error generating script');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<span>üêØ</span> Generate Script';
            }
        }

        // Fetch source performance
        async function fetchSourcePerformance() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/hive/source-performance`);
                const data = await res.json();
                renderSourcePerformance(data.sources || []);
            } catch (err) {
                console.error('Source performance error:', err);
            }
        }

        // Render source performance bars
        function renderSourcePerformance(sources) {
            const container = document.getElementById('source-performance');
            if (!sources.length) {
                container.innerHTML = '<div class="text-slate-500 text-center py-8">No source data yet. Generate scripts and provide feedback!</div>';
                return;
            }

            // Find max for scaling
            const maxProspects = Math.max(...sources.map(s => parseInt(s.prospects_found) || 1));

            // Update best source
            const best = sources[0];
            if (best) {
                document.getElementById('hive-best-source').textContent = best.source || '--';
            }

            container.innerHTML = sources.map(s => {
                const prospects = parseInt(s.prospects_found) || 0;
                const conversions = parseInt(s.conversions) || 0;
                const replies = parseInt(s.replies) || 0;
                const successRate = parseFloat(s.success_rate) || 0;
                const barWidth = Math.max(5, (prospects / maxProspects) * 100);

                const sourceColors = {
                    'LINE': 'bg-green-500',
                    'Facebook': 'bg-blue-500',
                    'Telegram': 'bg-sky-500',
                    'LinkedIn': 'bg-indigo-500'
                };
                const barColor = Object.entries(sourceColors).find(([key]) => s.source?.includes(key))?.[1] || 'bg-tiger-500';

                return `
                    <div class="space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">${s.source || 'Unknown'}</span>
                            <div class="flex items-center gap-4 text-sm">
                                <span class="text-slate-400">${prospects} prospects</span>
                                <span class="text-green-400">${conversions} converted</span>
                                <span class="text-blue-400">${replies} replies</span>
                                <span class="${successRate >= 50 ? 'text-green-400' : successRate >= 25 ? 'text-yellow-400' : 'text-slate-400'}">${successRate}%</span>
                            </div>
                        </div>
                        <div class="h-3 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full ${barColor} rounded-full transition-all" style="width: ${barWidth}%"></div>
                        </div>
                    </div>`;
            }).join('');
        }

        // Fetch hive trends
        async function fetchHiveTrends() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/hive/trends?days=30`);
                const data = await res.json();

                // Update summary cards
                if (data.summary) {
                    document.getElementById('hive-total-learnings').textContent = data.summary.total_learnings || 0;
                    document.getElementById('hive-total-successes').textContent = data.summary.total_successes || 0;
                    document.getElementById('hive-this-week').textContent = data.summary.this_week || 0;
                }

                renderTrendsChart(data.script_trends || [], data.hive_trends || []);
            } catch (err) {
                console.error('Hive trends error:', err);
            }
        }

        // Render trends as a simple bar chart
        function renderTrendsChart(scriptTrends, hiveTrends) {
            const container = document.getElementById('trends-chart');

            if (!scriptTrends.length && !hiveTrends.length) {
                container.innerHTML = '<div class="text-slate-500 text-center py-8">No trend data yet. Start generating scripts!</div>';
                return;
            }

            // Combine data by date
            const dateMap = new Map();
            scriptTrends.forEach(d => {
                const date = d.date?.split('T')[0];
                if (date) {
                    dateMap.set(date, {
                        ...dateMap.get(date),
                        scripts: parseInt(d.scripts_created) || 0,
                        converted: parseInt(d.converted) || 0,
                        got_reply: parseInt(d.got_reply) || 0
                    });
                }
            });

            const sortedDates = Array.from(dateMap.entries())
                .sort((a, b) => a[0].localeCompare(b[0]))
                .slice(-14); // Last 14 days

            if (!sortedDates.length) {
                container.innerHTML = '<div class="text-slate-500 text-center py-8">No recent activity</div>';
                return;
            }

            const maxScripts = Math.max(...sortedDates.map(([, d]) => d.scripts || 1));

            container.innerHTML = `
                <div class="flex items-end justify-between h-48 gap-1">
                    ${sortedDates.map(([date, d]) => {
                        const height = Math.max(5, ((d.scripts || 0) / maxScripts) * 100);
                        const converted = d.converted || 0;
                        const replies = d.got_reply || 0;
                        const day = new Date(date).toLocaleDateString('en-US', { weekday: 'short' });

                        return `
                            <div class="flex-1 flex flex-col items-center gap-1">
                                <div class="w-full bg-slate-800 rounded-t relative" style="height: ${height}%">
                                    ${converted > 0 ? `<div class="absolute bottom-0 w-full bg-green-500 rounded-t" style="height: ${(converted / (d.scripts || 1)) * 100}%"></div>` : ''}
                                    ${replies > 0 ? `<div class="absolute bottom-0 w-full bg-blue-500/50 rounded-t" style="height: ${(replies / (d.scripts || 1)) * 100}%"></div>` : ''}
                                </div>
                                <span class="text-xs text-slate-500">${day}</span>
                            </div>`;
                    }).join('')}
                </div>
                <div class="flex items-center justify-center gap-6 mt-4 text-xs">
                    <div class="flex items-center gap-2"><span class="w-3 h-3 bg-slate-700 rounded"></span>Scripts</div>
                    <div class="flex items-center gap-2"><span class="w-3 h-3 bg-blue-500 rounded"></span>Replies</div>
                    <div class="flex items-center gap-2"><span class="w-3 h-3 bg-green-500 rounded"></span>Converted</div>
                </div>
            `;
        }

        // Fetch top signals
        async function fetchTopSignals() {
            try {
                const res = await fetch(`${API_BASE}/ai-crm/hive/top-signals`);
                const data = await res.json();
                renderTopSignals(data.signals || []);
            } catch (err) {
                console.error('Top signals error:', err);
            }
        }

        // Render top signals
        function renderTopSignals(signals) {
            const container = document.getElementById('top-signals');

            if (!signals.length) {
                container.innerHTML = '<div class="text-slate-500 text-sm">No successful signals yet. Keep using scripts!</div>';
                return;
            }

            container.innerHTML = signals.slice(0, 5).map(s => {
                const preview = (s.signal || '').substring(0, 60);
                return `
                    <div class="bg-slate-800 rounded-lg p-3">
                        <p class="text-sm text-slate-300 mb-1">"${preview}${s.signal?.length > 60 ? '...' : ''}"</p>
                        <div class="flex items-center gap-2 text-xs">
                            <span class="text-green-400">üéØ ${s.conversions || 0}</span>
                            <span class="text-slate-500">${s.source || ''}</span>
                        </div>
                    </div>`;
            }).join('');
        }

        // Calculate ROI
        function calculateROI() {
            const dealValue = parseFloat(document.getElementById('roi-deal-value').value) || 500;
            const subscription = 99;

            // Get current stats
            const total = parseInt(document.getElementById('stat-total').textContent) || 0;
            const converted = parseInt(document.getElementById('pipe-converted').textContent) || 0;

            document.getElementById('roi-prospects').textContent = total;
            document.getElementById('roi-conversions').textContent = converted;

            const revenue = converted * dealValue;
            document.getElementById('roi-revenue').textContent = revenue.toLocaleString();

            const roi = subscription > 0 ? Math.round(((revenue - subscription) / subscription) * 100) : 0;
            document.getElementById('roi-percent').textContent = roi + '%';
        }

        // Update funnel display
        function updateFunnel(stats) {
            const byStatus = stats.by_status || {};
            const newCount = byStatus.new || 0;
            const contacted = byStatus.contacted || 0;
            const qualified = byStatus.qualified || 0;
            const converted = byStatus.converted || 0;

            document.getElementById('funnel-new').textContent = newCount;
            document.getElementById('funnel-contacted').textContent = contacted;
            document.getElementById('funnel-qualified').textContent = qualified;
            document.getElementById('funnel-converted').textContent = converted;

            // Calculate rates
            document.getElementById('funnel-rate-1').textContent = newCount > 0 ? Math.round((contacted / newCount) * 100) + '%' : '0%';
            document.getElementById('funnel-rate-2').textContent = contacted > 0 ? Math.round((qualified / contacted) * 100) + '%' : '0%';
            document.getElementById('funnel-rate-3').textContent = qualified > 0 ? Math.round((converted / qualified) * 100) + '%' : '0%';
        }

        // Update analytics based on period
        async function updateAnalytics() {
            const period = document.getElementById('analytics-period').value;
            await fetchAnalyticsData(period);
        }

        // Fetch analytics data
        async function fetchAnalyticsData(days = 30) {
            try {
                // Get stats
                const statsRes = await fetch(`${API_BASE}/ai-crm/stats`);
                const stats = await statsRes.json();

                // Update key metrics
                document.getElementById('analytics-total').textContent = stats.total || 0;
                document.getElementById('analytics-total-change').textContent = `+${stats.this_week || 0} this week`;
                document.getElementById('analytics-avg-score').textContent = stats.avg_score || 0;

                const byStatus = stats.by_status || {};
                const total = stats.total || 1;
                const converted = byStatus.converted || 0;
                const convRate = Math.round((converted / total) * 100);
                document.getElementById('analytics-conversion').textContent = convRate + '%';

                // Get feedback stats for script success
                const fbRes = await fetch(`${API_BASE}/ai-crm/feedback/stats`);
                const fbStats = await fbRes.json();
                const successRate = Math.round(
                    ((fbStats.by_feedback?.got_reply || 0) + (fbStats.by_feedback?.converted || 0)) /
                    Math.max(fbStats.with_feedback || 1, 1) * 100
                );
                document.getElementById('analytics-script-success').textContent = successRate + '%';

                // Render score distribution
                renderScoreDistribution(allProspects);

                // Render best sources
                const sourcesRes = await fetch(`${API_BASE}/ai-crm/hive/source-performance`);
                const sourcesData = await sourcesRes.json();
                renderBestSources(sourcesData.sources || []);

                // Render prospects timeline
                const trendsRes = await fetch(`${API_BASE}/ai-crm/hive/trends?days=${days === 'all' ? 365 : days}`);
                const trendsData = await trendsRes.json();
                renderProspectsTimeline(trendsData.script_trends || []);

            } catch (err) {
                console.error('Analytics error:', err);
            }
        }

        // Render score distribution
        function renderScoreDistribution(prospects) {
            const container = document.getElementById('score-distribution');
            if (!prospects.length) {
                container.innerHTML = '<div class="text-slate-500 text-center py-4">No data yet</div>';
                return;
            }

            const ranges = [
                { label: '90-100', min: 90, max: 100, color: 'bg-green-500' },
                { label: '70-89', min: 70, max: 89, color: 'bg-tiger-500' },
                { label: '50-69', min: 50, max: 69, color: 'bg-yellow-500' },
                { label: '0-49', min: 0, max: 49, color: 'bg-red-500' }
            ];

            const total = prospects.length;
            const distribution = ranges.map(r => ({
                ...r,
                count: prospects.filter(p => p.ai_score >= r.min && p.ai_score <= r.max).length
            }));

            container.innerHTML = distribution.map(d => {
                const pct = Math.round((d.count / total) * 100);
                return `
                    <div class="space-y-1">
                        <div class="flex justify-between text-sm">
                            <span>${d.label}</span>
                            <span class="text-slate-400">${d.count} (${pct}%)</span>
                        </div>
                        <div class="h-2 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full ${d.color} rounded-full" style="width: ${pct}%"></div>
                        </div>
                    </div>`;
            }).join('');
        }

        // Render best sources
        function renderBestSources(sources) {
            const container = document.getElementById('best-sources');
            if (!sources.length) {
                container.innerHTML = '<div class="text-slate-500 text-center py-4">No data yet</div>';
                return;
            }

            container.innerHTML = sources.slice(0, 5).map((s, i) => {
                const medal = i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : 'üìä';
                return `
                    <div class="flex items-center justify-between p-3 bg-slate-800 rounded-xl">
                        <div class="flex items-center gap-3">
                            <span>${medal}</span>
                            <span class="font-medium">${s.source || 'Unknown'}</span>
                        </div>
                        <div class="text-sm">
                            <span class="text-green-400">${s.conversions || 0} conv</span>
                            <span class="text-slate-500 mx-1">¬∑</span>
                            <span class="text-slate-400">${s.prospects_found || 0} total</span>
                        </div>
                    </div>`;
            }).join('');
        }

        // Render prospects timeline
        function renderProspectsTimeline(trends) {
            const container = document.getElementById('prospects-timeline');
            if (!trends.length) {
                container.innerHTML = '<div class="text-slate-500 text-center py-8">No timeline data yet</div>';
                return;
            }

            const last14 = trends.slice(-14);
            const maxVal = Math.max(...last14.map(t => parseInt(t.scripts_created) || 1));

            container.innerHTML = `
                <div class="flex items-end justify-between h-40 gap-1">
                    ${last14.map(t => {
                        const val = parseInt(t.scripts_created) || 0;
                        const height = Math.max(5, (val / maxVal) * 100);
                        const day = new Date(t.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
                        return `
                            <div class="flex-1 flex flex-col items-center gap-1">
                                <div class="text-xs text-slate-500">${val}</div>
                                <div class="w-full bg-tiger-500/50 hover:bg-tiger-500 rounded-t transition cursor-pointer" style="height: ${height}%" title="${day}: ${val} scripts"></div>
                                <span class="text-xs text-slate-600 truncate w-full text-center">${day.split(' ')[1]}</span>
                            </div>`;
                    }).join('')}
                </div>
            `;
        }

        // Test connections
        async function testConnections() {
            const btn = event.target;
            btn.disabled = true;
            btn.textContent = 'üîÑ Testing...';

            try {
                const res = await fetch(`${API_BASE}/health`);
                if (res.ok) {
                    alert('‚úÖ All systems operational!');
                } else {
                    alert('‚ö†Ô∏è Some services may be unavailable');
                }
            } catch (err) {
                alert('‚ùå Connection failed: ' + err.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'üîÑ Test All Connections';
            }
        }

        // Save settings
        function saveSettings() {
            const settings = {
                reportTime: document.getElementById('settings-report-time').value,
                discoverySchedule: document.getElementById('settings-discovery-schedule').value,
                minScore: document.getElementById('settings-min-score').value,
                notifications: {
                    daily: document.getElementById('notify-daily').checked,
                    highScore: document.getElementById('notify-high-score').checked,
                    weekly: document.getElementById('notify-weekly').checked
                },
                sources: {
                    line: document.getElementById('source-line').checked,
                    facebook: document.getElementById('source-facebook').checked
                }
            };

            // Save to localStorage for now (would save to API in production)
            localStorage.setItem('tigerbot-settings', JSON.stringify(settings));
            alert('‚úÖ Settings saved!');
        }

        // Load settings
        function loadSettings() {
            const saved = localStorage.getItem('tigerbot-settings');
            if (saved) {
                try {
                    const settings = JSON.parse(saved);
                    if (settings.reportTime) document.getElementById('settings-report-time').value = settings.reportTime;
                    if (settings.discoverySchedule) document.getElementById('settings-discovery-schedule').value = settings.discoverySchedule;
                    if (settings.minScore) document.getElementById('settings-min-score').value = settings.minScore;
                    if (settings.notifications) {
                        document.getElementById('notify-daily').checked = settings.notifications.daily ?? true;
                        document.getElementById('notify-high-score').checked = settings.notifications.highScore ?? true;
                        document.getElementById('notify-weekly').checked = settings.notifications.weekly ?? false;
                    }
                    if (settings.sources) {
                        document.getElementById('source-line').checked = settings.sources.line ?? true;
                        document.getElementById('source-facebook').checked = settings.sources.facebook ?? true;
                    }
                } catch (e) {
                    console.error('Error loading settings:', e);
                }
            }
        }

        // Enhanced refresh
        async function refreshAll() {
            await refreshData();
            await fetchFeedbackStats();
            await fetchHiveLeaderboard();
            await fetchRecentFeedback();
            await fetchScripts();
            await fetchWinningScripts();
            await fetchSourcePerformance();
            await fetchHiveTrends();
            await fetchTopSignals();
            await fetchAnalyticsData();
            calculateROI();
        }

        // Initialize
        loadSettings();
        refreshAll();
        setInterval(refreshAll, 60000);
    </script>
</body>
</html>
